# Выдача рендомов провайдерами случайных чисел


www/index.html - ручной интерфейс с "кнопками", перед запуском включаем testrpc

## Стоимость

Стоимость создания базового: 45957 + 325800 - один раз и навсегда

Стоимость создания провайдера: 20601 + 295800 + 20734 = 337135 (установка админа, можно прописать сразу главный контракт) - делим на количество разрешенных рендомов одному провайдеру

Вызовы: 
- предложение рендома + 66673
- заявка на рендом + 86740
- метка админом предложения +  21094
- метка админом заявки + 41426
- отправка провайдером рендома + 21818

Итого стоимость одного числа (без деплоя контрактов) = **237751**

## Cхема работы

1 Провайдеры случайного числа создают свои контракты и нашего "админа" прописывают как внешнего админа

2 После этого провайдер может "набросать" в контракт любые рендомные числа через сиды (т.е. случайное число хранит у себя пока в секрете, а сид - это верификация что он его не подменит)

2.0 Провайдер на своей стороне генерирует случайные числа и у себя сохраняет их вместе с "солью" и полученным далее сидом 

2.1 OutRandom.getSeed - для сверки мы используем внутри это же значение, поэтому провайдер вызывает для построения сида тоже "константную" функцию

2.2 Provider.placeSuggest - после этого провайдер отправляет сид в свой контракт

3 OutRandom.placeRequest "Клиенты" рендома отправляют запросы в основной контракт

4. Админ - вне блокчейна - считывает все запросы и рендомы доступные и "соединяет их", прописывая 

4.1 в контракте напротив запроса клиента сид доступного рендома
	
4.2 в контракте провайдера помечает сид как "нужно открыть" для провайдера и индекс в основном контракте (можно тут сделать связку прямо с контрактом)
	
5. Провайдер следит за изменениями в своем контракте и открывает настоящее число в общем контракте напротив "заявки" нужной (а мы сверяем там по сиду то ли это число или нет).

В качестве "соли" используется произвольная строка, ее знает только провайдер и посылает нам вместе с числом (отсюда конечность чисел у одного провайдера либо требование разной соли)

var seed = sha3(salt, result)